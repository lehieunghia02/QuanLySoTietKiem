@using QuanLySoTietKiem.Models.SoSanhGoiTietKiem
@model SoSanhGoiTietKiemModel

<div class="container py-5">
  <div class="card shadow-sm border-0">
    <div class="card-header bg-light border-0">
      <h3 class="card-title mb-0">
        <i class="bi bi-bar-chart-line me-2 text-primary"></i>
        Compare Savings Packages
      </h3>
    </div>
    <div class="card-body">
      <div class="p-4 rounded bg-light mb-4">
        <form asp-action="SoSanhGoiTietKiem" method="post">
          <div class="mb-4">
            <label asp-for="SoTienDuKienGui">Expected Deposit Amount</label>
            <div class="input-group">
              <input asp-for="SoTienDuKienGui" class="form-control money-input"/>
              <span class="input-group-text">VND</span>
            </div>
            <span asp-validation-for="SoTienDuKienGui" class="text-danger"></span>
          </div>

          <button type="submit" class="btn btn-primary px-4">
            <i class="bi bi-arrow-left-right me-1"></i> Compare Packages
          </button>
        </form>
      </div>

      @if (Model.DanhSachGoi.Any())
      {
        <div class="mt-4">
          <h4 class="mb-4 fw-semibold">Comparison Results</h4>
          <div class="row">
            @foreach (var goi in Model.DanhSachGoi)
            {
              <div class="col-md-4 mb-4">
                <div class="card h-100 shadow-sm border-0">
                  <div class="card-header bg-white border-0">
                    <h5 class="card-title mb-0">@goi.MoTa</h5>
                  </div>
                  <div class="card-body">
                    <span class="badge bg-primary mb-3">
                      @goi.LaiSuat% / year
                    </span>
                    <p>
                      <strong>Estimated Interest:</strong> 
                      <span class="badge bg-success">@goi.TienLaiDuKien.ToString("N0") VND</span>
                    </p>
                    <p>
                      <strong>Total Amount Received:</strong> 
                      <span class="badge bg-dark">@goi.TongTienNhanDuoc.ToString("N0") VND</span>
                    </p>

                    <h6 class="text-success mt-3">Advantages:</h6>
                    <ul class="list-unstyled">
                      @foreach (var uuDiem in goi.UuDiem)
                      {
                        <li><i class="bi bi-check-circle-fill text-success"></i> @uuDiem</li>
                      }
                    </ul>

                    <h6 class="text-danger mt-2">Disadvantages:</h6>
                    <ul class="list-unstyled">
                      @foreach (var nhuocDiem in goi.NhuocDiem)
                      {
                        <li><i class="bi bi-x-circle-fill text-danger"></i> @nhuocDiem</li>
                      }
                    </ul>
                  </div>
                </div>
              </div>
            }
          </div>
        </div>
      }
    </div>
  </div>
</div>

@section Scripts {
  <script>
    $(document).ready(function () {
      $('.money-input').on('input', function () {
        let value = $(this).val().replace(/\D/g, '');
        $(this).val(new Intl.NumberFormat('en-US').format(value));
      });

      $('form').on('submit', function () {
        $('.money-input').each(function () {
          $(this).val($(this).val().replace(/\D/g, ''));
        });
      });
    });
  </script>
}